---
alwaysApply: true
---
# Cursor Rules - PIX Reveal Cake Topper

## ğŸ“š DocumentaÃ§Ã£o

### Estrutura de DocumentaÃ§Ã£o
- **NUNCA** crie arquivos `.md` na raiz do projeto (exceto README.md)
- Toda documentaÃ§Ã£o deve estar em `/docs/` seguindo a estrutura:
  - `/docs/setup/` - ConfiguraÃ§Ãµes e setup
  - `/docs/guides/` - Guias e tutoriais
  - `/docs/reports/` - RelatÃ³rios e liÃ§Ãµes aprendidas

### Antes de Criar DocumentaÃ§Ã£o
1. **SEMPRE** consulte `/docs/INDEX.md` para ver a estrutura
2. **SEMPRE** busque documentos existentes antes de criar novos
3. **SEMPRE** atualize docs existentes ao invÃ©s de criar duplicatas
4. Se criar novo doc, adicione referÃªncia ao `/docs/INDEX.md`

### Reports e LiÃ§Ãµes Aprendidas
- Reports em `/docs/reports/` sÃ£o histÃ³ricos importantes
- **NÃƒO** delete reports antigos, eles contÃªm liÃ§Ãµes aprendidas
- Ao encontrar problemas, **SEMPRE** consulte reports existentes
- DocumentaÃ§Ã£o de fixes deve ir para `/docs/reports/`

### AtualizaÃ§Ã£o de DocumentaÃ§Ã£o
- Ao fazer mudanÃ§as significativas, atualize os docs relacionados
- Se alterar API/configuraÃ§Ã£o, atualize `/docs/setup/`
- Se adicionar features, atualize `/docs/guides/`
- Se corrigir bugs complexos, documente em `/docs/reports/`

## ğŸ—ï¸ Arquitetura

### Stack
- Next.js (App Router)
- TypeScript
- Supabase (Database + Edge Functions)
- Abacate Pay (Pagamentos)
- OpenRouter + Google Gemini (GeraÃ§Ã£o de imagens)

### Estrutura de Pastas
- `/app/` - Next.js App Router (rotas e API routes)
- `/src/components/` - Componentes React
- `/src/hooks/` - Custom hooks
- `/src/lib/` - UtilitÃ¡rios e integraÃ§Ãµes
- `/supabase/` - Migrations e Edge Functions
- `/docs/` - Toda a documentaÃ§Ã£o

## ğŸ’³ Pagamentos

- **Provider**: Abacate Pay (migrado de Mercado Pago)
- Consulte `/docs/setup/ABACATEPAY_INTEGRATION.md` antes de modificar
- Webhooks configurados para atualizaÃ§Ã£o automÃ¡tica de status
- Sempre teste em ambiente dev antes de fazer alteraÃ§Ãµes

## ğŸ¨ GeraÃ§Ã£o de Imagens

- Engine: Google Gemini Flash 2.0 via OpenRouter
- Prompt engineering crÃ­tico para qualidade
- Consulte `/docs/guides/PROMPT_*` antes de alterar prompts
- Biblioteca de prompts testados em `/docs/guides/`

## ğŸ§ª Testes

- Sempre teste fluxo completo: prompt â†’ geraÃ§Ã£o â†’ pagamento â†’ download
- Consulte `/docs/reports/FULL_UX_TEST_REPORT_V*.md` para casos de teste
- Documente novos bugs em `/docs/reports/`

## âš ï¸ Cuidados Especiais

1. **Nunca** exponha chaves de API no cÃ³digo
2. **Sempre** use variÃ¡veis de ambiente
3. **Consulte** documentaÃ§Ã£o existente antes de reimplementar
4. **Atualize** docs ao fazer mudanÃ§as
5. **Preserve** histÃ³rico em `/docs/reports/`

## ğŸ”„ Workflow de Desenvolvimento

1. Consulte `/docs/INDEX.md` para encontrar documentaÃ§Ã£o relevante
2. Leia reports em `/docs/reports/` se enfrentar problemas similares
3. FaÃ§a mudanÃ§as no cÃ³digo
4. Atualize documentaÃ§Ã£o relacionada
5. Adicione liÃ§Ãµes aprendidas em `/docs/reports/` se relevante

## ğŸ“ Estilo de CÃ³digo

- TypeScript strict mode
- Componentes funcionais com hooks
- Nomenclatura em inglÃªs no cÃ³digo
- ComentÃ¡rios em portuguÃªs quando necessÃ¡rio
- Prettier para formataÃ§Ã£o
# Cursor Rules - PIX Reveal Cake Topper

## ğŸ“š DocumentaÃ§Ã£o

### Estrutura de DocumentaÃ§Ã£o
- **NUNCA** crie arquivos `.md` na raiz do projeto (exceto README.md)
- Toda documentaÃ§Ã£o deve estar em `/docs/` seguindo a estrutura:
  - `/docs/setup/` - ConfiguraÃ§Ãµes e setup
  - `/docs/guides/` - Guias e tutoriais
  - `/docs/reports/` - RelatÃ³rios e liÃ§Ãµes aprendidas

### Antes de Criar DocumentaÃ§Ã£o
1. **SEMPRE** consulte `/docs/INDEX.md` para ver a estrutura
2. **SEMPRE** busque documentos existentes antes de criar novos
3. **SEMPRE** atualize docs existentes ao invÃ©s de criar duplicatas
4. Se criar novo doc, adicione referÃªncia ao `/docs/INDEX.md`

### Reports e LiÃ§Ãµes Aprendidas
- Reports em `/docs/reports/` sÃ£o histÃ³ricos importantes
- **NÃƒO** delete reports antigos, eles contÃªm liÃ§Ãµes aprendidas
- Ao encontrar problemas, **SEMPRE** consulte reports existentes
- DocumentaÃ§Ã£o de fixes deve ir para `/docs/reports/`

### AtualizaÃ§Ã£o de DocumentaÃ§Ã£o
- Ao fazer mudanÃ§as significativas, atualize os docs relacionados
- Se alterar API/configuraÃ§Ã£o, atualize `/docs/setup/`
- Se adicionar features, atualize `/docs/guides/`
- Se corrigir bugs complexos, documente em `/docs/reports/`

## ğŸ—ï¸ Arquitetura

### Stack
- Next.js (App Router)
- TypeScript
- Supabase (Database + Edge Functions)
- Abacate Pay (Pagamentos)
- OpenRouter + Google Gemini (GeraÃ§Ã£o de imagens)

### Estrutura de Pastas
- `/app/` - Next.js App Router (rotas e API routes)
- `/src/components/` - Componentes React
- `/src/hooks/` - Custom hooks
- `/src/lib/` - UtilitÃ¡rios e integraÃ§Ãµes
- `/supabase/` - Migrations e Edge Functions
- `/docs/` - Toda a documentaÃ§Ã£o

## ğŸ’³ Pagamentos

- **Provider**: Abacate Pay (migrado de Mercado Pago)
- Consulte `/docs/setup/ABACATEPAY_INTEGRATION.md` antes de modificar
- Webhooks configurados para atualizaÃ§Ã£o automÃ¡tica de status
- Sempre teste em ambiente dev antes de fazer alteraÃ§Ãµes

## ğŸ¨ GeraÃ§Ã£o de Imagens

- Engine: Google Gemini Flash 2.0 via OpenRouter
- Prompt engineering crÃ­tico para qualidade
- Consulte `/docs/guides/PROMPT_*` antes de alterar prompts
- Biblioteca de prompts testados em `/docs/guides/`

## ğŸ§ª Testes

- Sempre teste fluxo completo: prompt â†’ geraÃ§Ã£o â†’ pagamento â†’ download
- Consulte `/docs/reports/FULL_UX_TEST_REPORT_V*.md` para casos de teste
- Documente novos bugs em `/docs/reports/`

## âš ï¸ Cuidados Especiais

1. **Nunca** exponha chaves de API no cÃ³digo
2. **Sempre** use variÃ¡veis de ambiente
3. **Consulte** documentaÃ§Ã£o existente antes de reimplementar
4. **Atualize** docs ao fazer mudanÃ§as
5. **Preserve** histÃ³rico em `/docs/reports/`

## ğŸ”„ Workflow de Desenvolvimento

1. Consulte `/docs/INDEX.md` para encontrar documentaÃ§Ã£o relevante
2. Leia reports em `/docs/reports/` se enfrentar problemas similares
3. FaÃ§a mudanÃ§as no cÃ³digo
4. Atualize documentaÃ§Ã£o relacionada
5. Adicione liÃ§Ãµes aprendidas em `/docs/reports/` se relevante

## ğŸ“ Estilo de CÃ³digo

- TypeScript strict mode
- Componentes funcionais com hooks
- Nomenclatura em inglÃªs no cÃ³digo
- ComentÃ¡rios em portuguÃªs quando necessÃ¡rio
- Prettier para formataÃ§Ã£o
